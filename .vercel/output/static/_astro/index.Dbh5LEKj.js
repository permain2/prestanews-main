import{j as tt,r as et,k as nt,n as st,o as U,p as at,q as it,s as rt,t as ot,v as lt,w as ut,V as ct,x as ft,y as mt,z as ht,S as pt,H as gt,A as B,B as dt,C as yt,D as At}from"./proxy.Dx8v2PAo.js";const St=(t,e,n)=>{const s=e-t;return((n-t)%s+s)%s+t};function X(t,e){return tt(t)?t[St(0,t.length,e)]:t}class Et{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>e.finished))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let s=0;s<this.animations.length;s++)this.animations[s][e]=n}attachTimeline(e){const n=this.animations.map(s=>s.attachTimeline(e));return()=>{n.forEach((s,a)=>{s&&s(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get state(){return this.getAll("state")}get startTime(){return this.getAll("startTime")}get duration(){return k(this.animations,"duration")}get iterationDuration(){return k(this.animations,"iterationDuration")}runAll(e){this.animations.forEach(n=>n[e]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function k(t,e){let n=0;for(let s=0;s<t.length;s++){const a=t[s][e];a!==null&&a>n&&(n=a)}return n}class Vt extends Et{then(e,n){return this.finished.finally(e).then(()=>{})}}function L(t){return typeof t=="object"&&!Array.isArray(t)}function Y(t,e,n,s){return typeof t=="string"&&L(e)?et(t,n,s):t instanceof NodeList?Array.from(t):Array.isArray(t)?t:[t]}function vt(t,e,n){return t*(e+1)}function q(t,e,n,s){return typeof e=="number"?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,t+parseFloat(e)):e==="<"?n:e.startsWith("<")?Math.max(0,n+parseFloat(e.slice(1))):s.get(e)??t}function Dt(t,e,n){for(let s=0;s<t.length;s++){const a=t[s];a.at>e&&a.at<n&&(st(t,a),s--)}}function Tt(t,e,n,s,a,o){Dt(t,a,o);for(let i=0;i<e.length;i++)t.push({value:e[i],at:nt(a,o,s[i]),easing:X(n,i)})}function bt(t,e){for(let n=0;n<t.length;n++)t[n]=t[n]/(e+1)}function Mt(t,e){return t.at===e.at?t.value===null?1:e.value===null?-1:0:t.at-e.at}const xt="easeInOut";function Ot(t,{defaultTransition:e={},...n}={},s,a){const o=e.duration||.3,i=new Map,l=new Map,p={},S=new Map;let b=0,u=0,I=0;for(let D=0;D<t.length;D++){const m=t[D];if(typeof m=="string"){S.set(m,u);continue}else if(!Array.isArray(m)){S.set(m.name,q(u,m.at,b,S));continue}let[v,h,c={}]=m;c.at!==void 0&&(u=q(u,c.at,b,S));let f=0;const T=(g,d,E,M=0,x=0)=>{const r=wt(g),{delay:C=0,times:y=at(r),type:N="keyframes",repeat:j,repeatType:Pt,repeatDelay:Rt=0,...$}=d;let{ease:V=e.ease||"easeOut",duration:A}=d;const W=typeof C=="function"?C(M,x):C,z=r.length,P=ot(N)?N:a?.[N||"keyframes"];if(z<=2&&P){let O=100;if(z===2&&jt(r)){const w=r[1]-r[0];O=Math.abs(w)}const F={...$};A!==void 0&&(F.duration=lt(A));const K=it(F,O,P);V=K.ease,A=K.duration}A??(A=o);const R=u+W;y.length===1&&y[0]===0&&(y[1]=1);const H=y.length-r.length;if(H>0&&rt(y,H),r.length===1&&r.unshift(null),j){A=vt(A,j);const O=[...r],F=[...y];V=Array.isArray(V)?[...V]:[V];const K=[...V];for(let w=0;w<j;w++){r.push(...O);for(let G=0;G<O.length;G++)y.push(F[G]+(w+1)),V.push(G===0?"linear":X(K,G-1))}bt(y,j)}const _=R+A;Tt(E,r,V,y,R,_),f=Math.max(W+A,f),I=Math.max(_,I)};if(U(v)){const g=J(v,l);T(h,c,Q("default",g))}else{const g=Y(v,h,s,p),d=g.length;for(let E=0;E<d;E++){h=h,c=c;const M=g[E],x=J(M,l);for(const r in h)T(h[r],Gt(c,r),Q(r,x),E,d)}}b=u,u+=f}return l.forEach((D,m)=>{for(const v in D){const h=D[v];h.sort(Mt);const c=[],f=[],T=[];for(let d=0;d<h.length;d++){const{at:E,value:M,easing:x}=h[d];c.push(M),f.push(ut(0,I,E)),T.push(x||"easeOut")}f[0]!==0&&(f.unshift(0),c.unshift(c[0]),T.unshift(xt)),f[f.length-1]!==1&&(f.push(1),c.push(null)),i.has(m)||i.set(m,{keyframes:{},transition:{}});const g=i.get(m);g.keyframes[v]=c,g.transition[v]={...e,duration:I,ease:T,times:f,...n}}}),i}function J(t,e){return!e.has(t)&&e.set(t,{}),e.get(t)}function Q(t,e){return e[t]||(e[t]=[]),e[t]}function wt(t){return Array.isArray(t)?t:[t]}function Gt(t,e){return t&&t[e]?{...t,...t[e]}:{...t}}const It=t=>typeof t=="number",jt=t=>t.every(It);function Ft(t,e){return t in e}class Kt extends ct{constructor(){super(...arguments),this.type="object"}readValueFromInstance(e,n){if(Ft(n,e)){const s=e[n];if(typeof s=="string"||typeof s=="number")return s}}getBaseTargetFromProps(){}removeValueFromRenderState(e,n){delete n.output[e]}measureInstanceViewportBox(){return ft()}build(e,n){Object.assign(e.output,n)}renderInstance(e,{output:n}){Object.assign(e,n)}sortInstanceNodePosition(){return 0}}function Bt(t){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=mt(t)&&!ht(t)?new pt(e):new gt(e);n.mount(t),B.set(t,n)}function Ct(t){const e={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},n=new Kt(e);n.mount(t),B.set(t,n)}function Nt(t,e){return U(t)||typeof t=="number"||typeof t=="string"&&!L(e)}function Z(t,e,n,s){const a=[];if(Nt(t,e))a.push(dt(t,L(e)&&e.default||e,n&&(n.default||n)));else{const o=Y(t,e,s),i=o.length;for(let l=0;l<i;l++){const p=o[l],S=p instanceof Element?Bt:Ct;B.has(p)||S(p);const b=B.get(p),u={...n};"delay"in u&&typeof u.delay=="function"&&(u.delay=u.delay(l,i)),a.push(...yt(b,{...e,transition:u},{}))}}return a}function Lt(t,e,n){const s=[];return Ot(t,e,n,{spring:At}).forEach(({keyframes:o,transition:i},l)=>{s.push(...Z(l,o,i))}),s}function Wt(t){return Array.isArray(t)&&t.some(Array.isArray)}function zt(t){function e(n,s,a){let o=[],i;if(Wt(n))o=Lt(n,s,t);else{const{onComplete:p,...S}=a||{};typeof p=="function"&&(i=p),o=Z(n,s,S,t)}const l=new Vt(o);return i&&l.finished.then(i),l}return e}const _t=zt();export{_t as a,St as w};
