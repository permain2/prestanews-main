import{r as p}from"./index.5eoMw82F.js";import{f as d,o as y,J as V,M as h}from"./proxy.Dx8v2PAo.js";import{u as x}from"./use-motion-value.14dBj_fk.js";import{u as A}from"./use-transform.x9-mPL9h.js";function C(t,e,s){const o=t.get();let n=null,f=o,c;const m=typeof o=="string"?o.replace(/[\d.-]/g,""):void 0,i=()=>{n&&(n.stop(),n=null)},S=()=>{i(),n=new V({keyframes:[g(t.get()),g(f)],velocity:t.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...s,onUpdate:c})};if(t.attach((r,a)=>{f=r,c=u=>a(l(u,m)),d.postRender(S)},i),y(e)){const r=e.on("change",u=>t.set(l(u,m))),a=t.on("destroy",r);return()=>{r(),a()}}return i}function l(t,e){return e?t+e:t}function g(t){return typeof t=="number"?t:parseFloat(t)}function D(t,e={}){const{isStatic:s}=p.useContext(h),o=()=>y(t)?t.get():t;if(s)return A(o);const n=x(o());return p.useInsertionEffect(()=>C(n,t,e),[n,JSON.stringify(e)]),n}export{D as u};
