import{j as l}from"./jsx-runtime.D_zvdyIk.js";import{r as s}from"./index.5eoMw82F.js";import{u as Q,f as Z,L as F,l as ee,M,b as te,c as ne,m as R,g as H,h as re,i as se}from"./proxy.Dx8v2PAo.js";import{a as O}from"./index.Dbh5LEKj.js";import{A as V}from"./index.Btit3ATN.js";import{u as oe}from"./use-motion-value.14dBj_fk.js";const ie=s.createContext(null);function ae(){const e=s.useRef(!1);return Q(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function ce(){const e=ae(),[t,n]=s.useState(0),r=s.useCallback(()=>{e.current&&n(t+1)},[t]);return[s.useCallback(()=>Z.postRender(r),[r]),t]}const ue=e=>!e.isLayoutDirty&&e.willUpdate(!1);function G(){const e=new Set,t=new WeakMap,n=()=>e.forEach(ue);return{add:r=>{e.add(r),t.set(r,r.addEventListener("willUpdate",n))},remove:r=>{e.delete(r);const i=t.get(r);i&&(i(),t.delete(r)),n()},dirty:n}}const _=e=>e===!0,le=e=>_(e===!0)||e==="id",de=({children:e,id:t,inherit:n=!0})=>{const r=s.useContext(F),i=s.useContext(ie),[b,h]=ce(),g=s.useRef(null),a=r.id||i;g.current===null&&(le(n)&&a&&(t=t?a+"-"+t:a),g.current={id:t,group:_(n)&&r.group||G()});const y=s.useMemo(()=>({...g.current,forceRender:b}),[h]);return l.jsx(F.Provider,{value:y,children:e})};function fe({children:e,isValidProp:t,...n}){t&&ee(t),n={...s.useContext(M),...n},n.isStatic=te(()=>n.isStatic);const r=s.useMemo(()=>n,[JSON.stringify(n.transition),n.transformPagePoint,n.reducedMotion]);return l.jsx(M.Provider,{value:r,children:e})}const C="var(--mask-height, 0.15em)",E="var(--mask-width, 0.5em)",j=`calc(${E} / var(--invert-x, 1))`,$="#000 0, transparent 71%",pe=`linear-gradient(to right, transparent 0, #000 ${j}, #000 calc(100% - ${j}), transparent),linear-gradient(to bottom, transparent 0, #000 ${C}, #000 calc(100% - ${C}), transparent 100%),radial-gradient(at bottom right, ${$}),radial-gradient(at bottom left, ${$}), radial-gradient(at top left, ${$}), radial-gradient(at top right, ${$})`,ye=`100% calc(100% - ${C} * 2),calc(100% - ${j} * 2) 100%,${j} ${C},${j} ${C},${j} ${C},${j} ${C}`;ne({"--invert-x":{correct:(e,{treeScale:t,projectionDelta:n})=>n.x.scale*t.x}});function me({children:e,layoutDependency:t}){return l.jsx(R.span,{layout:!0,layoutDependency:t,"aria-hidden":!0,style:{display:"inline-flex","--invert-x":1,margin:`0 calc(-1*${E})`,padding:`calc(${C}/2) ${E}`,position:"relative",zIndex:-1,overflow:"clip",WebkitMaskImage:pe,WebkitMaskSize:ye,WebkitMaskPosition:"center, center, top left, top right, bottom right, bottom left",WebkitMaskRepeat:"no-repeat"},children:e})}function U(){const e=s.useRef(!0);return s.useEffect(()=>{e.current=!1},[]),e.current}function D(e){const{width:t,fontSize:n}=getComputedStyle(e);return`${parseFloat(t)/parseFloat(n)}em`}const K=new WeakMap,he=s.forwardRef(function({value:t,initialValue:n=t,...r},i){const{transition:b}=s.useContext(M),h=s.useRef(n).current,g=U(),a=s.useRef(null),y=s.useRef(null);s.useImperativeHandle(i,()=>y.current,[]);const w=s.useRef(new Array(10)),x=H(),d=x?t:0;s.useLayoutEffect(()=>{!a.current||!w.current[h]||(a.current.style.width=D(w.current[h]))},[]);const m=s.useRef(n);s.useLayoutEffect(()=>{if(!a.current||d===m.current)return;const o=a.current.getBoundingClientRect(),c=y.current?.getBoundingClientRect(),v=o.height*(d-m.current)+(o.top-(c?c.top||0:o.top));return O(a.current,{y:[v,0]},b),()=>{m.current=d}},[d]);const[p,u]=s.useState();s.useEffect(()=>{if(g&&h===d||!w.current[d])return;const o=D(w.current[d]);y.current&&K.set(y.current,o),u(o)},[d]);const f=o=>l.jsx("span",{style:{display:"inline-block",padding:`calc(${C}/2) 0`},ref:c=>void(w.current[o]=c),children:o},o);return l.jsx(R.span,{...r,ref:y,layout:"position","data-state":x?void 0:"exiting",style:{display:"inline-flex",justifyContent:"center",width:p},children:l.jsxs("span",{ref:a,style:{display:"inline-flex",justifyContent:"center",flexDirection:"column",alignItems:"center",position:"relative"},children:[d!==0&&l.jsx("span",{style:{...z,bottom:"100%",left:0},children:new Array(d).fill(null).map((o,c)=>f(c))}),f(d),d!==9&&l.jsx("span",{style:{...z,top:"100%",left:0},children:new Array(9-d).fill(null).map((o,c)=>f(d+c+1))})]})})}),z={display:"flex",flexDirection:"column",alignItems:"center",position:"absolute",width:"100%"},X=s.createContext({justify:"left"}),xe=s.forwardRef(function({partKey:t,type:n,children:r,layoutDependency:i,...b},h){const g=H(),{justify:a}=s.useContext(X);return l.jsx(R.span,{...b,"data-state":g?void 0:"exiting",style:{display:"inline-flex",justifyContent:a,padding:`calc(${C}/2) 0`,position:"relative"},layout:"position",layoutDependency:i,ref:h,children:l.jsx(V,{mode:"popLayout",anchorX:a,initial:!1,children:l.jsx(R.span,{layout:a==="right"?"position":!1,layoutDependency:i,initial:{opacity:0},animate:{opacity:[null,1]},exit:{opacity:[null,0]},style:{display:"inline-block",whiteSpace:"pre"},children:r},r)})})}),S=s.forwardRef(function({parts:t,justify:n="left",mode:r,style:i,name:b,layoutDependency:h,...g},a){const y=s.useRef(null);s.useImperativeHandle(a,()=>y.current,[]);const w=s.useMemo(()=>({justify:n}),[n]),x=s.useRef(null),d=U(),[m,p]=s.useState();return s.useEffect(()=>{if(!x.current)return;if(d){y.current&&(y.current.style.width=D(x.current));return}const u=Array.from(x.current.children).map(f=>{if(!(f instanceof HTMLElement))return;if(f.dataset.state==="exiting"){const v=f.nextSibling;return f.remove(),()=>{x.current&&x.current.insertBefore(f,v)}}const o=K.get(f);if(!o)return;const c=f.style.width;return f.style.width=o,()=>{f.style.width=c}});p(D(x.current));for(let f=u.length-1;f>=0;f--){const o=u[f];o&&o()}},[t.map(u=>u.value).join("")]),l.jsx(X.Provider,{value:w,children:l.jsx(R.span,{layoutDependency:h,...g,ref:y,className:`number-section-${b}`,style:{...i,display:"inline-flex",justifyContent:n,width:m},children:l.jsxs("span",{ref:x,style:{display:"inline-flex",justifyContent:"inherit",position:"relative"},children:["â€‹",l.jsx(V,{mode:r,anchorX:n,initial:!1,children:t.map(u=>u.type==="integer"||u.type==="fraction"?l.jsx(he,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},value:u.value,initialValue:d?void 0:0,layoutDependency:h},u.key):l.jsx(xe,{type:u.type,partKey:u.key,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},layoutDependency:h,children:u.value},u.type==="literal"?`${u.key}:${u.value}`:u.key))})]})})})}),ge=(e,{locales:t,format:n},r,i)=>{const h=new Intl.NumberFormat(t,n).formatToParts(Number(e));r&&h.unshift({type:"prefix",value:r}),i&&h.push({type:"suffix",value:i});const g=[],a=[],y=[],w=[],x={},d=o=>`${o}:${x[o]=(x[o]??-1)+1}`;let m="",p=!1,u=!1;for(const o of h){m+=o.value;const c=o.type==="minusSign"||o.type==="plusSign"?"sign":o.type;switch(c){case"integer":p=!0,a.push(...o.value.split("").map(v=>({type:c,value:parseInt(v)})));break;case"group":a.push({type:c,value:o.value});break;case"decimal":u=!0,y.push({type:c,value:o.value,key:d(c)});break;case"fraction":y.push(...o.value.split("").map(v=>({type:c,value:parseInt(v),key:d(c)})));break;default:(p||u?w:g).push({type:c,value:o.value,key:d(c)})}}const f=[];for(let o=a.length-1;o>=0;o--)f.unshift({...a[o],key:d(a[o].type)});return{pre:g,integer:f,fraction:y,post:w,formatted:m}},be={opacity:{duration:1,ease:re},layout:{type:"spring",duration:1,bounce:0},y:{type:"spring",duration:1,bounce:0}};s.forwardRef(function({children:t,locales:n,format:r,transition:i,style:b,suffix:h,prefix:g,...a},y){const w=s.useMemo(()=>ge(t,{locales:n,format:r},g,h),[t,n,r]),{pre:x,integer:d,fraction:m,post:p,formatted:u}=w,f=s.useContext(M).transition;i=i??f??be;const{layoutDependency:o}=a,c=s.useMemo(()=>{if(o!==void 0)return{layoutDependency:o,value:t}},[o,t]);return l.jsx(de,{children:l.jsx(fe,{transition:i,children:l.jsx(R.div,{...a,ref:y,layout:!0,layoutDependency:c,style:{lineHeight:1,...b,display:"inline-flex",isolation:"isolate",whiteSpace:"nowrap"},children:l.jsxs(R.div,{layout:!0,layoutDependency:c,"aria-label":u,style:{display:"inline-flex",direction:"ltr",isolation:"isolate",position:"relative",zIndex:-1},children:[l.jsx(S,{style:{padding:`calc(${C}/2) 0`},layoutDependency:c,"aria-hidden":!0,justify:"right",mode:"popLayout",parts:x,name:"pre"}),l.jsxs(me,{layoutDependency:c,children:[l.jsx(S,{layoutDependency:c,justify:"right",parts:d,name:"integer"}),l.jsx(S,{layout:"position",layoutDependency:c,parts:m,name:"fraction"})]}),l.jsx(S,{style:{padding:`calc(${C}/2) 0`},"aria-hidden":!0,layout:"position",layoutDependency:c,mode:"popLayout",parts:p,name:"post"})]})})})})});R.create(s.Fragment);function Y(e,t){return e.length>t.length||e.length>0&&!t.startsWith(e)}function q(e,t,n){return e+(t-e)*n}function we(e,t,n,r,i){if(Y(t,e))return n*i;if(r==="natural")return Ce(e,t,n);if(typeof r=="number"&&r>0){const b=n*(r/100);return n+q(-b,b,Math.random())}return n}function Ce(e,t,n){const r=t.length,i=e[r],b=e[r-1];if(!i)return n;const g=e.slice(0,r).lastIndexOf(" "),a=r-g-1,y=g+1,x=e.slice(r).indexOf(" "),m=(x===-1?e.length:r+x)-y;let p=1;if(b&&/[.!?]/.test(b)&&i===" "&&(p*=3),m<=3?p*=.7:(a===0&&i!==" "&&(p*=1.5),a===m-1&&(p*=1.4)),a>0&&a<m-1&&m>3){const c=Math.min(a/m,.4);p*=1-c}ve.has(i)&&(p*=1.5),Re.has(i)&&(p*=1.5),/\d/.test(i)&&(p*=1.3),m>8&&(p*=1.3),i!==i.toLowerCase()&&(p*=1.25);const u=200;if(r>u){const c=Math.min((r-u)/1e3,.3);p*=1+c}const f=q(-.25,.25,Math.random());p*=1+f;const o=n*p;return Math.max(n*.2,o)}const ve=new Set([".",",","!","?",":",";","'",'"',"-","(",")"]),Re=new Set(["!","@","#","$","%","^","&","*","(",")","_","+","{","}","|",":",'"',"<",">","?"]);function je(e,t){let n=t-1;for(;n>=0&&/\s/.test(e[n]);)n--;for(;n>=0&&!/\s/.test(e[n]);)n--;return Math.max(0,n+1)}function ke(e,t){const n=Math.min(e.length,t.length);let r=0;for(let i=0;i<n&&e[i]===t[i];i++)r=i+1;return r}function Ie(e,t,n,r){if(n==="type"&&Y(e,t)){if(r==="all")return t.slice(0,ke(e,t));if(r==="word"){const i=je(e,e.length);return e.slice(0,i)}else return e.slice(0,-1)}return t.slice(0,e.length+1)}const $e={slow:130,normal:75,fast:30},Pe=s.forwardRef(function({children:t="",as:n,speed:r="normal",variance:i="natural",cursorClassName:b="motion-typewriter-cursor",cursorStyle:h,cursorBlinkDuration:g=.5,onComplete:a,play:y=!0,"aria-label":w,textClassName:x,textStyle:d,replace:m="type",backspace:p="character",backspaceFactor:u=.2,...f},o){const c=n||"span",v=s.useRef(t),k=oe(""),I=s.useRef(null),L=s.useRef(null),N=s.useRef(null),P=typeof r=="number"?r:$e[r],W=()=>{I.current?.(),I.current=null},A=()=>{L.current=O(N.current,{opacity:[1,1,0,0]},{duration:g,times:[0,.5,.5,1],ease:"linear",repeat:1/0,repeatType:"reverse"})};return s.useEffect(()=>{m==="all"&&t!==v.current&&k.set(""),v.current=t},[t,m]),s.useEffect(()=>{if(!y){A(),W();return}L.current?.cancel();const J=()=>{const B=Ie(k.get(),t,m,p);k.set(B),B!==t?T():(A(),a?.())},T=()=>{I.current=se(J,we(t,k.get(),P,i,u))};return I.current||T(),W},[y,a,t,P,i,u,p]),l.jsxs(c,{ref:o,...f,"aria-label":w||t,children:[l.jsx(R.span,{className:x,style:d,children:k}),l.jsx(R.span,{ref:N,className:b,style:{display:"inline-block",width:"2px",height:"1em",backgroundColor:"currentColor",position:"relative",top:"0.1em",left:"0.2em",...h}})]})});export{Pe as T};
